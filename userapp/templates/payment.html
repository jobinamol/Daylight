{% extends 'userindex.html' %}
{% block content %}
{% load static %}

<!-- Hero Section -->
<div class="hero-wrap" style="background-image: url('{% static 'images/payment.jpg' %}');">
    <div class="overlay"></div>
    <div class="container">
        <div class="row no-gutters slider-text d-flex align-items-end justify-content-center">
            <div class="col-md-9 ftco-animate text-center">
                <div class="text">
                    <h1 class="mb-4 bread">Payment Page</h1>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Payment Section -->
<section class="ftco-section">
    <div class="container">
        <h2 class="mb-4">Review Your Booking</h2>
        <div id="booking-details" class="mb-4">
            <h4>Selected Package: <span id="selected-package"></span></h4>
            <h4>Selected Room: <span id="selected-room"></span></h4>
            <h4>Total Amount: <span id="total-amount"></span></h4>
        </div>

        <h3 class="mb-4">Select Payment Method</h3>
        <form id="payment-form">
            <div class="form-group">
                <label for="payment-method">Choose a Payment Method:</label>
                <select id="payment-method" class="form-control">
                    <option value="credit-card">Credit Card</option>
                    <option value="debit-card">Debit Card</option>
                    <option value="paypal">PayPal</option>
                    <option value="net-banking">Net Banking</option>
                </select>
            </div>

            <!-- Payment Details Section -->
            <div id="payment-details">
                <div class="form-group">
                    <label for="card-number">Card Number:</label>
                    <input type="text" class="form-control" id="card-number" placeholder="Enter your card number" required>
                </div>
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="expiry-date">Expiry Date:</label>
                        <input type="text" class="form-control" id="expiry-date" placeholder="MM/YY" required>
                    </div>
                    <div class="form-group col-md-6">
                        <label for="cvv">CVV:</label>
                        <input type="text" class="form-control" id="cvv" placeholder="CVV" required>
                    </div>
                </div>
            </div>

            <!-- Submit Button -->
            <button type="button" class="btn btn-primary" onclick="submitPayment()">Pay Now</button>
        </form>
    </div>
</section>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Get booking details from local storage
        const totalAmount = localStorage.getItem('totalAmount');
        const packageSelected = localStorage.getItem('selectedPackage');
        const roomSelected = localStorage.getItem('selectedRoom');

        // Display booking details
        document.getElementById('selected-package').innerText = packageSelected || "Not Selected";
        document.getElementById('selected-room').innerText = roomSelected || "Not Selected";
        document.getElementById('total-amount').innerText = `â‚¹${parseInt(totalAmount).toLocaleString()}`;
    });

    function submitPayment() {
        // Simulate payment processing
        alert("Payment processed successfully!");
        // Redirect to confirmation page after payment
        window.location.href = "{% url 'confirmation' %}"; // Redirect to confirmation page
    }
</script>

{% endblock %}
