{% extends 'userindex.html' %}
{% load static %}



{% block content %}
<div class="hero-wrap" style="background-image: url('{% static 'images/bg_1.jpg' %}');">
    <div class="overlay"></div>
    <div class="container">
        <div class="row no-gutters slider-text d-flex align-items-end justify-content-center">
            <div class="col-md-9 ftco-animate text-center d-flex align-items-end justify-content-center">
                <div class="text">
                    <p class="breadcrumbs mb-2"><span class="mr-2"><a href="{% url 'userdashboard' %}">Home</a></span> <span>About</span></p>
                    <h1 class="mb-4 bread">About Daylight Resort</h1>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container mt-5">
    <h2 class="mb-4">Your Saved Packages</h2>
    <div class="row">
        {% for package in packages %}
        <div class="col-md-4 mb-4">
            <div class="card package-card">
                <img src="{{ package.image.url }}" class="card-img-top package-image" alt="{{ package.name }}">
                <div class="card-body">
                    <h5 class="card-title">{{ package.name }}</h5>
                    <p class="card-text">{{ package.description|truncatewords:20 }}</p>
                    <ul class="package-features list-unstyled">
                        <li><i class="fas fa-clock"></i> {{ package.duration }}</li>
                        <li><i class="fas fa-user-friends"></i> Max {{ package.max_capacity }} guests</li>
                        <li><i class="fas fa-rupee-sign"></i> {{ package.price }}</li>
                    </ul>
                    <a href="{% url 'daycation_package_details' package.id %}" class="btn btn-primary">View Details</a>
                    <button class="btn btn-danger remove-from-wishlist" data-package-id="{{ package.id }}">Remove from Wishlist</button>
                </div>
            </div>
        </div>
        {% empty %}
        <div class="col-12">
            <div class="alert alert-info text-center">
                <i class="fas fa-info-circle"></i> Your wishlist is empty.
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
$(document).ready(function() {
    $('.remove-from-wishlist').click(function() {
        var btn = $(this);
        var packageId = btn.data('package-id');

        $.ajax({
            url: '/toggle-wishlist/' + packageId + '/',
            method: 'POST',
            headers: {'X-CSRFToken': '{{ csrf_token }}'},
            success: function(data) {
                // Optionally, handle successful removal response
                btn.closest('.col-md-4').fadeOut();
            },
            error: function(xhr) {
                // Handle any error responses here
                alert('Failed to remove package from wishlist. Please try again.');
            }
        });
    });
});
</script>
{% endblock %}

{% block extra_css %}
<style>
.header {
    margin-bottom: 30px; /* Space below header */
}

.breadcrumb {
    background-color: transparent; /* Transparent background for breadcrumb */
}

.package-card {
    transition: transform 0.2s; /* Smooth transform on hover */
}

.package-card:hover {
    transform: scale(1.05); /* Slight scale effect on hover */
}

.package-features li {
    margin-bottom: 10px; /* Space between features */
}

.btn-danger {
    margin-top: 10px; /* Space above remove button */
}
</style>
{% endblock %}
