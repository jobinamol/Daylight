{% extends 'admin/base_admin.html' %}

{% block content %}
<h1>Edit Daycation Package</h1>

<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="form-group">
        <label for="name">Package Name</label>
        <input type="text" class="form-control" id="name" name="name" value="{{ package.name }}" required>
    </div>
    <div class="form-group">
        <label for="price">Price</label>
        <input type="number" step="0.01" class="form-control" id="price" name="price" value="{{ package.price }}" required>
    </div>
    <div class="form-group">
        <label for="description">Description</label>
        <textarea class="form-control" id="description" name="description" rows="3" required>{{ package.description }}</textarea>
    </div>
    <div class="form-group">
        <label for="duration">Duration</label>
        <input type="text" class="form-control" id="duration" name="duration" value="{{ package.duration }}" required>
    </div>
    <div class="form-group">
        <label for="max_capacity">Max Capacity</label>
        <input type="number" class="form-control" id="max_capacity" name="max_capacity" value="{{ package.max_capacity }}" required>
    </div>
    <div class="form-group">
        <label for="category">Category</label>
        <select class="form-control" id="category" name="category" required>
            {% for category in categories %}
            <option value="{{ category.id }}" {% if category.id == package.category_id %}selected{% endif %}>{{ category.name }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="form-group">
        <label for="image">Package Image</label>
        <input type="file" class="form-control-file" id="image" name="image">
        {% if package.image %}
        <img src="{{ package.image.url }}" alt="{{ package.name }}" class="img-thumbnail mt-2" style="max-width: 200px;">
        {% endif %}
    </div>
    
    <h3>Features</h3>
    <div id="features">
        {% for feature in package.features.all %}
        <div class="form-group">
            <input type="text" class="form-control" name="features" value="{{ feature.name }}" placeholder="Feature">
        </div>
        {% endfor %}
    </div>
    <button type="button" class="btn btn-secondary" onclick="addFeature()">Add Feature</button>

    <h3>Add-ons</h3>
    <div id="addons">
        {% for addon in package.addons.all %}
        <div class="form-group">
            <input type="text" class="form-control" name="addon_name" value="{{ addon.name }}" placeholder="Add-on Name">
            <input type="number" step="0.01" class="form-control" name="addon_price" value="{{ addon.price }}" placeholder="Add-on Price">
            <textarea class="form-control" name="addon_description" placeholder="Add-on Description">{{ addon.description }}</textarea>
        </div>
        {% endfor %}
    </div>
    <button type="button" class="btn btn-secondary" onclick="addAddon()">Add Add-on</button>

    <button type="submit" class="btn btn-primary mt-3">Update Package</button>
</form>

<script>
function addFeature() {
    const featuresDiv = document.getElementById('features');
    const newFeature = document.createElement('div');
    newFeature.className = 'form-group';
    newFeature.innerHTML = '<input type="text" class="form-control" name="features" placeholder="Feature">';
    featuresDiv.appendChild(newFeature);
}

function addAddon() {
    const addonsDiv = document.getElementById('addons');
    const newAddon = document.createElement('div');
    newAddon.className = 'form-group';
    newAddon.innerHTML = `
        <input type="text" class="form-control" name="addon_name" placeholder="Add-on Name">
        <input type="number" step="0.01" class="form-control" name="addon_price" placeholder="Add-on Price">
        <textarea class="form-control" name="addon_description" placeholder="Add-on Description"></textarea>
    `;
    addonsDiv.appendChild(newAddon);
}
</script>
{% endblock %}

